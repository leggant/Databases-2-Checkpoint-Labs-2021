CREATE TABLE message(
author VARCHAR(100) NOT NULL, 
message MEDIUMBLOB NOT NULL, 
message_hash CHAR(50) NOT NULL PRIMARY KEY
) ENGINE=INNODB;

CREATE TRIGGER message_hash 
BEFORE INSERT ON message 
FOR EACH ROW SET NEW.message_hash = sha1(NEW.message);


INSERT INTO message (author, message) 
VALUES ('Me','This is my message');
Select * from message;
SELECT SHA1('This is my message');


CREATE TABLE account (
acct_num INT, 
amount DECIMAL(10,2)
); 

CREATE TRIGGER ins_sum 
BEFORE INSERT ON account 
FOR EACH ROW SET @sum = @sum + NEW.amount;

SET @sum = 0;
INSERT INTO account VALUES(137,14.98), 
(141,1937.50), 
(97,-100.00); 
SELECT @sum AS 'Total amount';


CREATE TABLE t (qty INT, price INT); 
INSERT INTO t VALUES(3, 50), (2,100),(50,32); 
CREATE VIEW v AS SELECT qty, price, qty*price AS value FROM t; 
SELECT * FROM v;

CREATE VIEW book_reviews AS
SELECT bk.bID as book_ID, 
bk.title as book_title, 
bk.published as year_published,
bk.genre as genre, 
re.name as reviewed_by, 
ra.ratings as review_rating, 
ra.ratingDate as date_reviewed
FROM Book bk
JOIN Rating ra ON
bk.bID = ra.bID
JOIN Reviewer re ON
ra.rID = re.rID;

Indexes

Create an index while creating the table

CREATE TABLE employee_records 
(name VARCHAR(50), 
employee_ID INT,
INDEX (employee_ID) 
);

Create a table, then index later

CREATE TABLE employee_records2 (
name VARCHAR(50), 
employee_ID INT);

CREATE INDEX id_index ON employee_records2(employee_ID);
